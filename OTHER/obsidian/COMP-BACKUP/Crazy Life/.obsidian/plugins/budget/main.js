/*
THIS IS A GENERATED/BUNDLED FILE BY VITE
if you want to view the source, please visit the github repository of this plugin
https://github.com/kalinichenko88/obsidian-budget-planner-plugin
*/
"use strict";const X=require("obsidian"),jn={defaultBudgetBlock:`Category 1:
	Rent       | 1000 | Comment
	Communal Fees | 100
Category 2:
	Food    | 500`};class Wn extends X.PluginSettingTab{constructor(t,n){super(t,n),this.plugin=n}display(){const{containerEl:t}=this;t.empty(),new X.Setting(t).setName("Default value for budget block").addTextArea(n=>n.setPlaceholder("Enter your secret").setValue(this.plugin.settings.defaultBudgetBlock).onChange(async r=>{this.plugin.settings.defaultBudgetBlock=r,await this.plugin.saveSettings()}))}}const Ht=!1;var kt=Array.isArray,Kn=Array.prototype.indexOf,St=Array.from,ln=Object.defineProperty,Ae=Object.getOwnPropertyDescriptor,an=Object.getOwnPropertyDescriptors,Vn=Object.prototype,Yn=Array.prototype,Tt=Object.getPrototypeOf,jt=Object.isExtensible;const pe=()=>{};function Xn(e){return e()}function gt(e){for(var t=0;t<e.length;t++)e[t]()}const G=2,un=4,rt=8,Rt=16,le=32,ke=64,Ye=128,K=256,Xe=512,j=1024,re=2048,ge=4096,oe=8192,st=16384,Gn=32768,Nt=65536,Zn=1<<19,cn=1<<20,wt=1<<21,be=Symbol("$state"),Jn=Symbol("");function fn(e){return e===this.v}function dn(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function vn(e){return!dn(e,this.v)}function Qn(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function $n(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function er(e){throw new Error("https://svelte.dev/e/effect_orphan")}function tr(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function nr(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function rr(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function sr(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Le=!1,or=!1;function lr(){Le=!0}const At=1,It=2,hn=4,ar=8,ir=16,ur=1,cr=2,H=Symbol(),fr="http://www.w3.org/1999/xhtml";function _n(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let R=null;function Wt(e){R=e}function ye(e){return gn().get(e)}function vt(e,t){return gn().set(e,t),t}function ae(e,t=!1,n){var r=R={p:R,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};Le&&!t&&(R.l={s:null,u:null,r1:[],r2:De(!1)}),Mt(()=>{r.d=!0})}function ie(e){const t=R;if(t!==null){e!==void 0&&(t.x=e);const l=t.e;if(l!==null){var n=A,r=k;t.e=null;try{for(var s=0;s<l.length;s++){var o=l[s];ve(o.effect),se(o.reaction),Dt(o.fn)}}finally{ve(n),se(r)}}R=t.p,t.m=!0}return e||{}}function Pe(){return!Le||R!==null&&R.l===null}function gn(e){return R===null&&_n(),R.c??(R.c=new Map(dr(R)||void 0))}function dr(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}function Y(e){if(typeof e!="object"||e===null||be in e)return e;const t=Tt(e);if(t!==Vn&&t!==Yn)return e;var n=new Map,r=kt(e),s=z(0),o=k,l=a=>{var i=k;se(o);var u=a();return se(i),u};return r&&n.set("length",z(e.length)),new Proxy(e,{defineProperty(a,i,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&nr();var d=n.get(i);return d===void 0?(d=l(()=>z(u.value)),n.set(i,d)):O(d,l(()=>Y(u.value))),!0},deleteProperty(a,i){var u=n.get(i);if(u===void 0)i in a&&n.set(i,l(()=>z(H)));else{if(r&&typeof i=="string"){var d=n.get("length"),f=Number(i);Number.isInteger(f)&&f<d.v&&O(d,f)}O(u,H),Kt(s)}return!0},get(a,i,u){var v;if(i===be)return e;var d=n.get(i),f=i in a;if(d===void 0&&(!f||(v=Ae(a,i))!=null&&v.writable)&&(d=l(()=>z(Y(f?a[i]:H))),n.set(i,d)),d!==void 0){var c=_(d);return c===H?void 0:c}return Reflect.get(a,i,u)},getOwnPropertyDescriptor(a,i){var u=Reflect.getOwnPropertyDescriptor(a,i);if(u&&"value"in u){var d=n.get(i);d&&(u.value=_(d))}else if(u===void 0){var f=n.get(i),c=f==null?void 0:f.v;if(f!==void 0&&c!==H)return{enumerable:!0,configurable:!0,value:c,writable:!0}}return u},has(a,i){var c;if(i===be)return!0;var u=n.get(i),d=u!==void 0&&u.v!==H||Reflect.has(a,i);if(u!==void 0||A!==null&&(!d||(c=Ae(a,i))!=null&&c.writable)){u===void 0&&(u=l(()=>z(d?Y(a[i]):H)),n.set(i,u));var f=_(u);if(f===H)return!1}return d},set(a,i,u,d){var x;var f=n.get(i),c=i in a;if(r&&i==="length")for(var v=u;v<f.v;v+=1){var h=n.get(v+"");h!==void 0?O(h,H):v in a&&(h=l(()=>z(H)),n.set(v+"",h))}f===void 0?(!c||(x=Ae(a,i))!=null&&x.writable)&&(f=l(()=>z(void 0)),O(f,l(()=>Y(u))),n.set(i,f)):(c=f.v!==H,O(f,l(()=>Y(u))));var b=Reflect.getOwnPropertyDescriptor(a,i);if(b!=null&&b.set&&b.set.call(d,u),!c){if(r&&typeof i=="string"){var w=n.get("length"),E=Number(i);Number.isInteger(E)&&E>=w.v&&O(w,E+1)}Kt(s)}return!0},ownKeys(a){_(s);var i=Reflect.ownKeys(a).filter(f=>{var c=n.get(f);return c===void 0||c.v!==H});for(var[u,d]of n)d.v!==H&&!(u in a)&&i.push(u);return i},setPrototypeOf(){rr()}})}function Kt(e,t=1){O(e,e.v+t)}function ot(e){var t=G|re,n=k!==null&&(k.f&G)!==0?k:null;return A===null||n!==null&&(n.f&K)!==0?t|=K:A.f|=cn,{ctx:R,deps:null,effects:null,equals:fn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??A}}function D(e){const t=ot(e);return In(t),t}function vr(e){const t=ot(e);return t.equals=vn,t}function wn(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)de(t[n])}}function hr(e){for(var t=e.parent;t!==null;){if((t.f&G)===0)return t;t=t.parent}return null}function mn(e){var t,n=A;ve(hr(e));try{wn(e),t=zn(e)}finally{ve(n)}return t}function pn(e){var t=mn(e),n=(fe||(e.f&K)!==0)&&e.deps!==null?ge:j;Z(e,n),e.equals(t)||(e.v=t,e.wv=Mn())}const Me=new Map;function De(e,t){var n={f:0,v:e,reactions:null,equals:fn,rv:0,wv:0};return n}function z(e,t){const n=De(e);return In(n),n}function bn(e,t=!1){var r;const n=De(e);return t||(n.equals=vn),Le&&R!==null&&R.l!==null&&((r=R.l).s??(r.s=[])).push(n),n}function O(e,t,n=!1){k!==null&&!ee&&Pe()&&(k.f&(G|Rt))!==0&&!(B!=null&&B.includes(e))&&sr();let r=n?Y(t):t;return mt(e,r)}function mt(e,t){if(!e.equals(t)){var n=e.v;Be?Me.set(e,t):Me.set(e,n),e.v=t,(e.f&G)!==0&&((e.f&re)!==0&&mn(e),Z(e,(e.f&K)===0?j:ge)),e.wv=Mn(),yn(e,re),Pe()&&A!==null&&(A.f&j)!==0&&(A.f&(le|ke))===0&&(V===null?Cr([e]):V.push(e))}return t}function yn(e,t){var n=e.reactions;if(n!==null)for(var r=Pe(),s=n.length,o=0;o<s;o++){var l=n[o],a=l.f;(a&re)===0&&(!r&&l===A||(Z(l,t),(a&(j|K))!==0&&((a&G)!==0?yn(l,ge):ct(l))))}}let _r=!1;var Vt,En,Cn,xn;function gr(){if(Vt===void 0){Vt=window,En=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Cn=Ae(t,"firstChild").get,xn=Ae(t,"nextSibling").get,jt(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),jt(n)&&(n.__t=void 0)}}function Ot(e=""){return document.createTextNode(e)}function Ge(e){return Cn.call(e)}function lt(e){return xn.call(e)}function p(e,t){return Ge(e)}function Ee(e,t){{var n=Ge(e);return n instanceof Comment&&n.data===""?lt(n):n}}function N(e,t=1,n=!1){let r=e;for(;t--;)r=lt(r);return r}function wr(e){e.textContent=""}function kn(e){A===null&&k===null&&er(),k!==null&&(k.f&K)!==0&&A===null&&$n(),Be&&Qn()}function mr(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Se(e,t,n,r=!0){var s=A,o={ctx:R,deps:null,nodes_start:null,nodes_end:null,f:e|re,first:null,fn:t,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(n)try{Ft(o),o.f|=Gn}catch(i){throw de(o),i}else t!==null&&ct(o);var l=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(cn|Ye))===0;if(!l&&r&&(s!==null&&mr(o,s),k!==null&&(k.f&G)!==0)){var a=k;(a.effects??(a.effects=[])).push(o)}return o}function Mt(e){const t=Se(rt,null,!1);return Z(t,j),t.teardown=e,t}function Ce(e){kn();var t=A!==null&&(A.f&le)!==0&&R!==null&&!R.m;if(t){var n=R;(n.e??(n.e=[])).push({fn:e,effect:A,reaction:k})}else{var r=Dt(e);return r}}function pr(e){return kn(),at(e)}function br(e){const t=Se(ke,e,!0);return(n={})=>new Promise(r=>{n.outro?Ze(t,()=>{de(t),r(void 0)}):(de(t),r(void 0))})}function Dt(e){return Se(un,e,!1)}function at(e){return Se(rt,e,!0)}function ne(e,t=[],n=ot){const r=t.map(n);return zt(()=>e(...r.map(_)))}function zt(e,t=0){return Se(rt|Rt|t,e,!0)}function ze(e,t=!0){return Se(rt|le,e,!0,t)}function Sn(e){var t=e.teardown;if(t!==null){const n=Be,r=k;Yt(!0),se(null);try{t.call(null)}finally{Yt(n),se(r)}}}function Tn(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){var r=n.next;(n.f&ke)!==0?n.parent=null:de(n,t),n=r}}function yr(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&le)===0&&de(t),t=n}}function de(e,t=!0){var n=!1;if((t||(e.f&Zn)!==0)&&e.nodes_start!==null){for(var r=e.nodes_start,s=e.nodes_end;r!==null;){var o=r===s?null:lt(r);r.remove(),r=o}n=!0}Tn(e,t&&!n),tt(e,0),Z(e,st);var l=e.transitions;if(l!==null)for(const i of l)i.stop();Sn(e);var a=e.parent;a!==null&&a.first!==null&&Rn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function Rn(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ze(e,t){var n=[];qt(e,n,!0),Nn(n,()=>{de(e),t&&t()})}function Nn(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var s of e)s.out(r)}else t()}function qt(e,t,n){if((e.f&oe)===0){if(e.f^=oe,e.transitions!==null)for(const l of e.transitions)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var s=r.next,o=(r.f&Nt)!==0||(r.f&le)!==0;qt(r,t,o?n:!1),r=s}}}function Je(e){An(e,!0)}function An(e,t){if((e.f&oe)!==0){e.f^=oe,(e.f&j)===0&&(e.f^=j),Ue(e)&&(Z(e,re),ct(e));for(var n=e.first;n!==null;){var r=n.next,s=(n.f&Nt)!==0||(n.f&le)!==0;An(n,s?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let Qe=[];function Er(){var e=Qe;Qe=[],gt(e)}function it(e){Qe.length===0&&queueMicrotask(Er),Qe.push(e)}let je=!1,pt=!1,$e=null,he=!1,Be=!1;function Yt(e){Be=e}let We=[];let k=null,ee=!1;function se(e){k=e}let A=null;function ve(e){A=e}let B=null;function In(e){k!==null&&k.f&wt&&(B===null?B=[e]:B.push(e))}let P=null,W=0,V=null;function Cr(e){V=e}let On=1,et=0,fe=!1;function Mn(){return++On}function Ue(e){var f;var t=e.f;if((t&re)!==0)return!0;if((t&ge)!==0){var n=e.deps,r=(t&K)!==0;if(n!==null){var s,o,l=(t&Xe)!==0,a=r&&A!==null&&!fe,i=n.length;if(l||a){var u=e,d=u.parent;for(s=0;s<i;s++)o=n[s],(l||!((f=o==null?void 0:o.reactions)!=null&&f.includes(u)))&&(o.reactions??(o.reactions=[])).push(u);l&&(u.f^=Xe),a&&d!==null&&(d.f&K)===0&&(u.f^=K)}for(s=0;s<i;s++)if(o=n[s],Ue(o)&&pn(o),o.wv>e.wv)return!0}(!r||A!==null&&!fe)&&Z(e,j)}return!1}function xr(e,t){for(var n=t;n!==null;){if((n.f&Ye)!==0)try{n.fn(e);return}catch{n.f^=Ye}n=n.parent}throw je=!1,e}function kr(e){return(e.f&st)===0&&(e.parent===null||(e.parent.f&Ye)===0)}function ut(e,t,n,r){if(je){if(n===null&&(je=!1),kr(t))throw e;return}n!==null&&(je=!0);{xr(e,t);return}}function Dn(e,t,n=!0){var r=e.reactions;if(r!==null)for(var s=0;s<r.length;s++){var o=r[s];B!=null&&B.includes(e)||((o.f&G)!==0?Dn(o,t,!1):t===o&&(n?Z(o,re):(o.f&j)!==0&&Z(o,ge),ct(o)))}}function zn(e){var v;var t=P,n=W,r=V,s=k,o=fe,l=B,a=R,i=ee,u=e.f;P=null,W=0,V=null,fe=(u&K)!==0&&(ee||!he||k===null),k=(u&(le|ke))===0?e:null,B=null,Wt(e.ctx),ee=!1,et++,e.f|=wt;try{var d=(0,e.fn)(),f=e.deps;if(P!==null){var c;if(tt(e,W),f!==null&&W>0)for(f.length=W+P.length,c=0;c<P.length;c++)f[W+c]=P[c];else e.deps=f=P;if(!fe)for(c=W;c<f.length;c++)((v=f[c]).reactions??(v.reactions=[])).push(e)}else f!==null&&W<f.length&&(tt(e,W),f.length=W);if(Pe()&&V!==null&&!ee&&f!==null&&(e.f&(G|ge|re))===0)for(c=0;c<V.length;c++)Dn(V[c],e);return s!==e&&(et++,V!==null&&(r===null?r=V:r.push(...V))),d}finally{P=t,W=n,V=r,k=s,fe=o,B=l,Wt(a),ee=i,e.f^=wt}}function Sr(e,t){let n=t.reactions;if(n!==null){var r=Kn.call(n,e);if(r!==-1){var s=n.length-1;s===0?n=t.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(t.f&G)!==0&&(P===null||!P.includes(t))&&(Z(t,ge),(t.f&(K|Xe))===0&&(t.f^=Xe),wn(t),tt(t,0))}function tt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)Sr(e,n[r])}function Ft(e){var t=e.f;if((t&st)===0){Z(e,j);var n=A,r=R,s=he;A=e,he=!0;try{(t&Rt)!==0?yr(e):Tn(e),Sn(e);var o=zn(e);e.teardown=typeof o=="function"?o:null,e.wv=On;var l=e.deps,a;Ht&&or&&e.f&re}catch(i){ut(i,e,n,r||e.ctx)}finally{he=s,A=n}}}function Tr(){try{tr()}catch(e){if($e!==null)ut(e,$e,null);else throw e}}function Rr(){var e=he;try{var t=0;for(he=!0;We.length>0;){t++>1e3&&Tr();var n=We,r=n.length;We=[];for(var s=0;s<r;s++){var o=Ar(n[s]);Nr(o)}Me.clear()}}finally{pt=!1,he=e,$e=null}}function Nr(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];if((r.f&(st|oe))===0)try{Ue(r)&&(Ft(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Rn(r):r.fn=null))}catch(s){ut(s,r,null,r.ctx)}}}function ct(e){pt||(pt=!0,queueMicrotask(Rr));for(var t=$e=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(ke|le))!==0){if((n&j)===0)return;t.f^=j}}We.push(t)}function Ar(e){for(var t=[],n=e;n!==null;){var r=n.f,s=(r&(le|ke))!==0,o=s&&(r&j)!==0;if(!o&&(r&oe)===0){if((r&un)!==0)t.push(n);else if(s)n.f^=j;else{var l=k;try{k=n,Ue(n)&&Ft(n)}catch(u){ut(u,n,null,n.ctx)}finally{k=l}}var a=n.first;if(a!==null){n=a;continue}}var i=n.parent;for(n=n.next;n===null&&i!==null;)n=i.next,i=i.parent}return t}function _(e){var t=e.f,n=(t&G)!==0;if(k!==null&&!ee){if(!(B!=null&&B.includes(e))){var r=k.deps;e.rv<et&&(e.rv=et,P===null&&r!==null&&r[W]===e?W++:P===null?P=[e]:(!fe||!P.includes(e))&&P.push(e))}}else if(n&&e.deps===null&&e.effects===null){var s=e,o=s.parent;o!==null&&(o.f&K)===0&&(s.f^=K)}return n&&(s=e,Ue(s)&&pn(s)),Be&&Me.has(e)?Me.get(e):e.v}function Te(e){var t=ee;try{return ee=!0,e()}finally{ee=t}}const Ir=-7169;function Z(e,t){e.f=e.f&Ir|t}function Or(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(be in e)bt(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&be in n&&bt(n)}}}function bt(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{bt(e[r],t)}catch{}const n=Tt(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=an(n);for(let s in r){const o=r[s].get;if(o)try{o.call(e)}catch{}}}}}const Mr=["touchstart","touchmove"];function Dr(e){return Mr.includes(e)}let Xt=!1;function zr(){Xt||(Xt=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function qn(e){var t=k,n=A;se(null),ve(null);try{return e()}finally{se(t),ve(n)}}function Fn(e,t,n,r=n){e.addEventListener(t,()=>qn(n));const s=e.__on_r;s?e.__on_r=()=>{s(),r(!0)}:e.__on_r=()=>r(!0),zr()}const Ln=new Set,yt=new Set;function qr(e,t,n,r={}){function s(o){if(r.capture||Re.call(t,o),!o.cancelBubble)return qn(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?it(()=>{t.addEventListener(e,s,r)}):t.addEventListener(e,s,r),s}function Gt(e,t,n,r,s){var o={capture:r,passive:s},l=qr(e,t,n,o);(t===document.body||t===window||t===document)&&Mt(()=>{t.removeEventListener(e,l,o)})}function He(e){for(var t=0;t<e.length;t++)Ln.add(e[t]);for(var n of yt)n(e)}function Re(e){var x;var t=this,n=t.ownerDocument,r=e.type,s=((x=e.composedPath)==null?void 0:x.call(e))||[],o=s[0]||e.target,l=0,a=e.__root;if(a){var i=s.indexOf(a);if(i!==-1&&(t===document||t===window)){e.__root=t;return}var u=s.indexOf(t);if(u===-1)return;i<=u&&(l=i)}if(o=s[l]||e.target,o!==t){ln(e,"currentTarget",{configurable:!0,get(){return o||n}});var d=k,f=A;se(null),ve(null);try{for(var c,v=[];o!==null;){var h=o.assignedSlot||o.parentNode||o.host||null;try{var b=o["__"+r];if(b!=null&&(!o.disabled||e.target===o))if(kt(b)){var[w,...E]=b;w.apply(o,[e,...E])}else b.call(o,e)}catch(I){c?v.push(I):c=I}if(e.cancelBubble||h===t||h===null)break;o=h}if(c){for(let I of v)queueMicrotask(()=>{throw I});throw c}}finally{e.__root=t,delete e.currentTarget,se(d),ve(f)}}}function Fr(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Et(e,t){var n=A;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function U(e,t){var n=(t&ur)!==0,r=(t&cr)!==0,s,o=!e.startsWith("<!>");return()=>{s===void 0&&(s=Fr(o?e:"<!>"+e),n||(s=Ge(s)));var l=r||En?document.importNode(s,!0):s.cloneNode(!0);if(n){var a=Ge(l),i=l.lastChild;Et(a,i)}else Et(l,l);return l}}function Lr(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Ot();return e.append(t,n),Et(t,n),e}function q(e,t){e!==null&&e.before(t)}function te(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Pr(e,t){return Br(e,t)}const we=new Map;function Br(e,{target:t,anchor:n,props:r={},events:s,context:o,intro:l=!0}){gr();var a=new Set,i=f=>{for(var c=0;c<f.length;c++){var v=f[c];if(!a.has(v)){a.add(v);var h=Dr(v);t.addEventListener(v,Re,{passive:h});var b=we.get(v);b===void 0?(document.addEventListener(v,Re,{passive:h}),we.set(v,1)):we.set(v,b+1)}}};i(St(Ln)),yt.add(i);var u=void 0,d=br(()=>{var f=n??t.appendChild(Ot());return ze(()=>{if(o){ae({});var c=R;c.c=o}s&&(r.$$events=s),u=e(f,r)||{},o&&ie()}),()=>{var h;for(var c of a){t.removeEventListener(c,Re);var v=we.get(c);--v===0?(document.removeEventListener(c,Re),we.delete(c)):we.set(c,v)}yt.delete(i),f!==n&&((h=f.parentNode)==null||h.removeChild(f))}});return Ct.set(u,d),u}let Ct=new WeakMap;function Ur(e,t){const n=Ct.get(e);return n?(Ct.delete(e),n(t)):Promise.resolve()}function xe(e,t,[n,r]=[0,0]){var s=e,o=null,l=null,a=H,i=n>0?Nt:0,u=!1;const d=(c,v=!0)=>{u=!0,f(v,c)},f=(c,v)=>{a!==(a=c)&&(a?(o?Je(o):v&&(o=ze(()=>v(s))),l&&Ze(l,()=>{l=null})):(l?Je(l):v&&(l=ze(()=>v(s,[n+1,r]))),o&&Ze(o,()=>{o=null})))};zt(()=>{u=!1,t(d),u||f(null,null)},i)}function Hr(e,t,n,r){for(var s=[],o=t.length,l=0;l<o;l++)qt(t[l].e,s,!0);var a=o>0&&s.length===0&&n!==null;if(a){var i=n.parentNode;wr(i),i.append(n),r.clear(),ce(e,t[0].prev,t[o-1].next)}Nn(s,()=>{for(var u=0;u<o;u++){var d=t[u];a||(r.delete(d.k),ce(e,d.prev,d.next)),de(d.e,!a)}})}function Zt(e,t,n,r,s,o=null){var l=e,a={flags:t,items:new Map,first:null},i=(t&hn)!==0;if(i){var u=e;l=u.appendChild(Ot())}var d=null,f=!1,c=vr(()=>{var v=n();return kt(v)?v:v==null?[]:St(v)});zt(()=>{var v=_(c),h=v.length;f&&h===0||(f=h===0,jr(v,a,l,s,t,r,n),o!==null&&(h===0?d?Je(d):d=ze(()=>o(l)):d!==null&&Ze(d,()=>{d=null})),_(c))})}function jr(e,t,n,r,s,o,l){var $,y,Pt,Bt;var a=(s&ar)!==0,i=(s&(At|It))!==0,u=e.length,d=t.items,f=t.first,c=f,v,h=null,b,w=[],E=[],x,I,m,C;if(a)for(C=0;C<u;C+=1)x=e[C],I=o(x,C),m=d.get(I),m!==void 0&&(($=m.a)==null||$.measure(),(b??(b=new Set)).add(m));for(C=0;C<u;C+=1){if(x=e[C],I=o(x,C),m=d.get(I),m===void 0){var J=c?c.e.nodes_start:n;h=Kr(J,t,h,h===null?t.first:h.next,x,I,C,r,s,l),d.set(I,h),w=[],E=[],c=h.next;continue}if(i&&Wr(m,x,C,s),(m.e.f&oe)!==0&&(Je(m.e),a&&((y=m.a)==null||y.unfix(),(b??(b=new Set)).delete(m))),m!==c){if(v!==void 0&&v.has(m)){if(w.length<E.length){var F=E[0],M;h=F.prev;var Q=w[0],T=w[w.length-1];for(M=0;M<w.length;M+=1)Jt(w[M],F,n);for(M=0;M<E.length;M+=1)v.delete(E[M]);ce(t,Q.prev,T.next),ce(t,h,Q),ce(t,T,F),c=F,h=T,C-=1,w=[],E=[]}else v.delete(m),Jt(m,c,n),ce(t,m.prev,m.next),ce(t,m,h===null?t.first:h.next),ce(t,h,m),h=m;continue}for(w=[],E=[];c!==null&&c.k!==I;)(c.e.f&oe)===0&&(v??(v=new Set)).add(c),E.push(c),c=c.next;if(c===null)continue;m=c}w.push(m),h=m,c=m.next}if(c!==null||v!==void 0){for(var g=v===void 0?[]:St(v);c!==null;)(c.e.f&oe)===0&&g.push(c),c=c.next;var S=g.length;if(S>0){var L=(s&hn)!==0&&u===0?n:null;if(a){for(C=0;C<S;C+=1)(Pt=g[C].a)==null||Pt.measure();for(C=0;C<S;C+=1)(Bt=g[C].a)==null||Bt.fix()}Hr(t,g,L,d)}}a&&it(()=>{var Ut;if(b!==void 0)for(m of b)(Ut=m.a)==null||Ut.apply()}),A.first=t.first&&t.first.e,A.last=h&&h.e}function Wr(e,t,n,r){(r&At)!==0&&mt(e.v,t),(r&It)!==0?mt(e.i,n):e.i=n}function Kr(e,t,n,r,s,o,l,a,i,u){var d=(i&At)!==0,f=(i&ir)===0,c=d?f?bn(s):De(s):s,v=(i&It)===0?l:De(l),h={i:v,v:c,k:o,a:null,e:null,prev:n,next:r};try{return h.e=ze(()=>a(e,c,v,u),_r),h.e.prev=n&&n.e,h.e.next=r&&r.e,n===null?t.first=h:(n.next=h,n.e.next=h.e),r!==null&&(r.prev=h,r.e.prev=h.e),h}finally{}}function Jt(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,s=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var l=lt(o);s.before(o),o=l}}function ce(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ue(e,t){it(()=>{var n=e.getRootNode(),r=n.host?n:n.head??n.ownerDocument.head;if(!r.querySelector("#"+t.hash)){const s=document.createElement("style");s.id=t.hash,s.textContent=t.code,r.appendChild(s)}})}const Qt=[...` 	
\r\f \v\uFEFF`];function Vr(e,t,n){var r=e==null?"":""+e;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var o=s.length,l=0;(l=r.indexOf(s,l))>=0;){var a=l+o;(l===0||Qt.includes(r[l-1]))&&(a===r.length||Qt.includes(r[a]))?r=(l===0?"":r.substring(0,l))+r.substring(a+1):l=a}}return r===""?null:r}function Ke(e,t,n,r,s,o){var l=e.__className;if(l!==n||l===void 0){var a=Vr(n,r,o);a==null?e.removeAttribute("class"):e.className=a,e.__className=n}else if(o&&s!==o)for(var i in o){var u=!!o[i];(s==null||u!==!!s[i])&&e.classList.toggle(i,u)}return o}const Yr=Symbol("is custom element"),Xr=Symbol("is html");function Ie(e,t,n,r){var s=Gr(e);s[t]!==(s[t]=n)&&(t==="loading"&&(e[Jn]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Zr(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Gr(e){return e.__attributes??(e.__attributes={[Yr]:e.nodeName.includes("-"),[Xr]:e.namespaceURI===fr})}var $t=new Map;function Zr(e){var t=$t.get(e.nodeName);if(t)return t;$t.set(e.nodeName,t=[]);for(var n,r=e,s=Element.prototype;s!==r;){n=an(r);for(var o in n)n[o].set&&t.push(o);r=Tt(r)}return t}function Jr(e,t,n=t){var r=Pe();Fn(e,"input",s=>{var o=s?e.defaultValue:e.value;if(o=ht(e)?_t(o):o,n(o),r&&o!==(o=t())){var l=e.selectionStart,a=e.selectionEnd;e.value=o??"",a!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(a,e.value.length))}}),Te(t)==null&&e.value&&n(ht(e)?_t(e.value):e.value),at(()=>{var s=t();ht(e)&&s===_t(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function Qr(e,t,n=t){Fn(e,"change",r=>{var s=r?e.defaultChecked:e.checked;n(s)}),Te(t)==null&&n(e.checked),at(()=>{var r=t();e.checked=!!r})}function ht(e){var t=e.type;return t==="number"||t==="range"}function _t(e){return e===""?null:+e}function en(e,t){return e===t||(e==null?void 0:e[be])===t}function Pn(e={},t,n,r){return Dt(()=>{var s,o;return at(()=>{s=o,o=[],Te(()=>{e!==n(...o)&&(t(e,...o),s&&en(n(...s),e)&&t(null,...s))})}),()=>{it(()=>{o&&en(n(...o),e)&&t(null,...o)})}}),e}function $r(e=!1){const t=R,n=t.l.u;if(!n)return;let r=()=>Or(t.s);if(e){let s=0,o={};const l=ot(()=>{let a=!1;const i=t.s;for(const u in i)i[u]!==o[u]&&(o[u]=i[u],a=!0);return a&&s++,s});r=()=>_(l)}n.b.length&&pr(()=>{tn(t,r),gt(n.b)}),Ce(()=>{const s=Te(()=>n.m.map(Xn));return()=>{for(const o of s)typeof o=="function"&&o()}}),n.a.length&&Ce(()=>{tn(t,r),gt(n.a)})}function tn(e,t){if(e.l.s)for(const n of e.l.s)_(n);t()}function Bn(e,t,n){if(e==null)return t(void 0),pe;const r=Te(()=>e.subscribe(t,n));return r.unsubscribe?()=>r.unsubscribe():r}const me=[];function nn(e,t=pe){let n=null;const r=new Set;function s(a){if(dn(e,a)&&(e=a,n)){const i=!me.length;for(const u of r)u[1](),me.push(u,e);if(i){for(let u=0;u<me.length;u+=2)me[u][0](me[u+1]);me.length=0}}}function o(a){s(a(e))}function l(a,i=pe){const u=[a,i];return r.add(u),r.size===1&&(n=t(s,o)||pe),a(e),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:o,subscribe:l}}function Ne(e){let t;return Bn(e,n=>t=n)(),t}let xt=Symbol();function qe(e,t,n){const r=n[t]??(n[t]={store:null,source:bn(void 0),unsubscribe:pe});if(r.store!==e&&!(xt in n))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=pe;else{var s=!0;r.unsubscribe=Bn(e,o=>{s?r.source.v=o:O(r.source,o)}),s=!1}return e&&xt in n?Ne(e):_(r.source)}function ft(){const e={};function t(){Mt(()=>{for(var n in e)e[n].unsubscribe();ln(e,xt,{enumerable:!1,value:!0})})}return[e,t]}function es(e){R===null&&_n(),Le&&R.l!==null?ts(R).m.push(e):Ce(()=>{const t=Te(e);if(typeof t=="function")return t})}function ts(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const ns="Budget Planner",rs=ns,ss=e=>new X.Notice(`[${rs}] ${e}. Please check the console for details.`),os=(e,...t)=>{},Un=(e,t)=>{{ss(e),console.error(t);return}},ls="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let as=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=ls[n[e]&63];return t};const Oe=()=>as(),rn="no-category-id",is="no-category-name";class us{constructor(t){this.rawData=t.split(`
`),this.categories=new Map,this.rows=new Map}isCategoryRow(t){return t.endsWith(":")&&!t.startsWith("	")}isCheckboxCell(t){return t==="[ ]"||t==="[]"||t==="[x]"||t==="[X]"}getCheckboxState(t){return t==="[x]"||t==="[X]"}parseAmount(t){if(!t||t.trim()==="")return 0;const n=t.replace(/[^\d.-]/g,""),r=parseFloat(n);return isNaN(r)?0:r}parse(){let t=rn;for(const n of this.rawData){if(!n.trim())continue;if(this.isCategoryRow(n)){t=Oe(),this.categories.set(t,n.replace(/:$/,""));continue}const r=n.split("|").map(f=>f.trim()),s=this.isCheckboxCell(r[0]),o=s?this.getCheckboxState(r[0]):!1,l=s?r[1]:r[0],a=s?r[2]:r[1],i=s?r[3]:r[2],u={id:Oe(),checked:o,name:l.trim(),amount:this.parseAmount(a),comment:(i||"").trim()},d=this.rows.get(t)||[];d.push(u),this.rows.set(t,d)}return this.rows.size>0&&this.categories.size===0&&this.categories.set(rn,is),{categories:this.categories,rows:this.rows}}}class cs{constructor(){this.isWriting=!1,this.values={categories:new Map,rows:new Map}}isCategoryRow(t){return t.endsWith(":")&&!t.startsWith("	")}formatRow(t){var l;const n=t.checked?"[x]":"[ ]",r=t.name||"",s=((l=t.amount)==null?void 0:l.toString())||"",o=t.comment||"";return`	${n} | ${r} | ${s}${o?` | ${o}`:""}
`}convertToString(t){let n="";return t.categories.forEach((r,s)=>{n+=`${r}:
`,(t.rows.get(s)||[]).forEach(l=>{n+=this.formatRow(l)})}),n}calculateMaxLengths(t){let n=0,r=0;for(const s of t){if(!s.startsWith("	"))continue;const o=s.split("|").map(u=>u.trim()),l=o[0]==="[ ]"||o[0]==="[x]"||o[0]==="[X]",a=l?o[1]:o[0],i=l?o[2]||"":o[1]||"";n=Math.max(n,a.length),r=Math.max(r,i.length)}return{maxNameLength:n,maxAmountLength:r}}parseRowCells(t){const n=t.split("|").map(s=>s.trim()),r=n[0]==="[ ]"||n[0]==="[x]"||n[0]==="[X]";return{checkbox:r?n[0]:"[ ]",name:r?n[1]:n[0],amount:r?n[2]||"":n[1]||"",comment:r?n[3]||"":n[2]||""}}formatCode(t){const n=t.split(`
`).filter(l=>l.trim()),{maxNameLength:r,maxAmountLength:s}=this.calculateMaxLengths(n);let o="";for(const l of n){if(this.isCategoryRow(l)){o+=l.trim()+`
`;continue}if(!l.startsWith("	"))continue;const{checkbox:a,name:i,amount:u,comment:d}=this.parseRowCells(l);if(!i||!u)continue;const f=i.padEnd(r," "),c=u.padEnd(s," ");let v=`	${a} | ${f} | ${c}`;d&&(v+=` | ${d}`),o+=v+`
`}return o}async updateFileContent(t,n,r){var c;const s=t.workspace.getActiveFile();if(!s)throw new Error("Active file not found");const a=(await t.vault.read(s)).split(`
`).slice(n.lineStart,n.lineEnd+1);if(!((c=a[0])!=null&&c.includes("```budget")))return;const i=a[0],u=a[a.length-1],d=[i,r.trim(),"```"].join(`
`),f=t.workspace.getActiveViewOfType(X.MarkdownView);if(!f)throw new Error("Active markdown view not found");f.editor.replaceRange(d,{line:n.lineStart,ch:0},{line:n.lineEnd,ch:u.length})}async write(t,n,r){if(this.isWriting)return;const s=this.convertToString(this.values),o=this.convertToString(t);if(s!==o){this.isWriting=!0;try{this.values=t;const l=this.formatCode(o);await this.updateFileContent(r,n,l)}catch(l){Un("Error writing to file",l)}finally{this.isWriting=!1}}}}const fs="5";var on;typeof window<"u"&&((on=window.__svelte??(window.__svelte={})).v??(on.v=new Set)).add(fs);var _e=(e=>(e.CHECK="check",e.NAME="name",e.AMOUNT="amount",e))(_e||{}),nt=(e=>(e.ASC="asc",e.DESC="desc",e))(nt||{});function ds(e,t){const n=r=>{if(r===null)return null;for(const[s,o]of Ne(e).rows)if(o.find(a=>a.id===r))return s;return null};return{selectRow:r=>{if(!(Ne(t).selectedRowId===null&&r===null))return t.update(s=>({...s,selectedRowId:r??null}))},newRow:(r=null)=>{let s=r;if(!s){const l=Ne(t).selectedRowId;s=n(l)}if(!s)return;const o=Oe();e.update(l=>{const{rows:a}=l,i=a.get(s)||[],u={id:o,checked:!1,name:"",amount:0,comment:""};return a.set(s,[...i,u]),l}),t.update(l=>({...l,selectedRowId:o}))},updateRow:r=>e.update(s=>{const{rows:o}=s;for(const[l,a]of o){const i=a.map(u=>u.id===r.id?r:u);o.set(l,i)}return s}),toggleEditing:r=>t.update(s=>({...s,isEditing:r})),deleteSelectedRow:()=>{const r=Ne(t).selectedRowId;if(r!==null)return e.update(s=>{const{rows:o}=s;for(const[l,a]of o){const i=a.filter(u=>u.id!==r);o.set(l,i)}return s})},sortRows:(r,s)=>e.update(o=>{const{rows:l}=o;for(const[a,i]of l){const u=i.sort((d,f)=>s===_e.CHECK?d.checked===f.checked?0:d.checked?-1:1:s===_e.NAME?d.name.localeCompare(f.name):s===_e.AMOUNT?d.amount-f.amount:0);l.set(a,r===nt.ASC?u:u.reverse())}return o}),newCategory:()=>{const r=Oe();e.update(s=>{const{categories:o,rows:l}=s,a=Oe(),i={id:r,checked:!1,name:"",amount:0,comment:""};return o.set(a,`New Category ${o.size+1}`),l.set(a,[i]),s}),t.update(s=>({...s,selectedRowId:r}))},updateCategory:(r,s)=>e.update(o=>{const{categories:l}=o;return l.set(r,s),o}),deleteCategory:r=>e.update(s=>{const{categories:o,rows:l}=s;return o.delete(r),l.delete(r),s})}}const Lt="store",Hn="store-state",dt="store-actions";lr();var vs=(e,t)=>t.apply(void 0,[e,_e.CHECK]),hs=(e,t)=>t.apply(void 0,[e,_e.NAME]),_s=(e,t)=>t.apply(void 0,[e,_e.AMOUNT]),gs=U('<thead><tr><th class="check svelte-1sgqzz4">#</th><th class="name svelte-1sgqzz4">Name</th><th class="amount svelte-1sgqzz4">Amount</th><th class="comment svelte-1sgqzz4">Comment</th></tr></thead>');const ws={hash:"svelte-1sgqzz4",code:".check.svelte-1sgqzz4 {width:5%;}.name.svelte-1sgqzz4 {width:35%;}.amount.svelte-1sgqzz4 {width:20%;}.comment.svelte-1sgqzz4 {width:auto;}"};function ms(e,t){ae(t,!1),ue(e,ws);const{selectRow:n,sortRows:r}=ye(dt);let s;const o=new X.Menu().addItem(c=>{c.setTitle("Sort by this column (ASC)").setIcon("arrow-up-narrow-wide").onClick(()=>{s&&r(nt.ASC,s)})}).addItem(c=>{c.setTitle("Sort by this column (DESC)").setIcon("arrow-down-narrow-wide").onClick(()=>{s&&r(nt.DESC,s)})}),l=(c,v)=>{c.preventDefault(),s=v,o.showAtMouseEvent(c),n(null)};$r();var a=gs(),i=p(a),u=p(i);u.__contextmenu=[vs,l];var d=N(u);d.__contextmenu=[hs,l];var f=N(d);f.__contextmenu=[_s,l],q(e,a),ie()}He(["contextmenu"]);const Fe=new Intl.NumberFormat("en-US",{style:"decimal"}),ps=(e,t,n)=>{O(t,!0),n.onEditingChange(!0)},bs=(e,t,n)=>{e.key==="Enter"&&(O(t,!0),n.onEditingChange(!0))},ys=(e,t,n,r)=>{e.key==="Enter"&&(O(t,!1),n.onEditingChange(!1),n.onChange(_(r))),e.key==="Escape"&&(O(t,!1),n.onEditingChange(!1),O(r,n.value,!0))};var Es=U("<div><input></div>"),Cs=U('<div role="button" tabindex="0"> </div>');const xs={hash:"svelte-1eqadht",code:`.input.svelte-1eqadht,
  .input.svelte-1eqadht:focus {margin:0;padding:0;border:none;outline:none;background:transparent;font:inherit;color:inherit;box-shadow:none;width:100%;}.input-number.svelte-1eqadht {text-align:right;}.input-edit.svelte-1eqadht {border:1px solid var(--color-blue);box-sizing:border-box;position:absolute;width:100%;height:100%;left:0;top:0;padding-left:var(--size-4-2);display:flex;align-items:center;& > .input-number:where(.svelte-1eqadht) {padding-right:var(--size-4-2);}}.text.svelte-1eqadht {display:flex;align-items:center;height:var(--input-height);}.end.svelte-1eqadht {justify-content:end;}`};function Ve(e,t){ae(t,!0),ue(e,xs);const n=D(()=>typeof t.value=="number"?"number":"text"),r=D(()=>_(n)==="number"?Fe.format(t.value):t.value.trim());let s=z(Y(t.value)),o=z(!1),l=z(null);const a=()=>{O(o,!1),t.onEditingChange(!1),t.onChange(_(s))},i=v=>{v.preventDefault()};Ce(()=>{_(o)&&_(l)&&_(l).focus()});var u=Lr(),d=Ee(u);{var f=v=>{var h=Es();let b;var w=p(h);let E;w.__keydown=[ys,o,t,s],Pn(w,x=>O(l,x),()=>_(l)),ne((x,I)=>{b=Ke(h,1,"svelte-1eqadht",null,b,x),E=Ke(w,1,"input svelte-1eqadht",null,E,I),Ie(w,"type",_(n)),Ie(w,"min",_(n)==="number"?"0":void 0),Ie(w,"step",_(n)==="number"?"0.10":void 0)},[()=>({"input-edit":_(o)}),()=>({"input-number":_(n)==="number"})]),Gt("blur",w,a),Gt("wheel",w,i),Jr(w,()=>_(s),x=>O(s,x)),q(v,h)},c=v=>{var h=Cs();let b;h.__click=[ps,o,t],h.__keydown=[bs,o,t];var w=p(h);ne(E=>{b=Ke(h,1,"text svelte-1eqadht",null,b,E),te(w,_(r))},[()=>({end:_(n)==="number"})]),q(v,h)};xe(d,v=>{_(o)?v(f):v(c,!1)})}q(e,u),ie()}He(["keydown","click"]);var ks=U('<tr class="category svelte-ygncg8"><td class="cell svelte-ygncg8"><!></td></tr>');const Ss={hash:"svelte-ygncg8",code:".category.svelte-ygncg8 {font-size:0.9em;font-weight:bold;& > .cell:where(.svelte-ygncg8) {position:relative;height:38.9px;}}"};function Ts(e,t){ae(t,!0),ue(e,Ss);let n=z(Y(t.categoryName));const{newCategory:r,deleteCategory:s,selectRow:o,updateCategory:l,toggleEditing:a}=ye(dt);Ce(()=>{_(n)!==t.categoryName&&l(t.categoryId,_(n))});const i=new X.Menu().addItem(h=>{h.setTitle("New category").setIcon("table-rows-split").onClick(()=>r())}).addSeparator().addItem(h=>{h.setTitle("Delete category and all rows").setIcon("list-x").setDisabled(!t.isDeletingEnabled).onClick(()=>s(t.categoryId))}),u=h=>{h.preventDefault(),o(null),i.showAtMouseEvent(h)},d=h=>{O(n,h,!0)};var f=ks();f.__contextmenu=u;var c=p(f);Ie(c,"colspan",4);var v=p(c);return Ve(v,{get value(){return _(n)},onChange:d,onEditingChange:a}),q(e,f),ie({handleOnMenu:u,handleOnChange:d})}He(["contextmenu"]);const Rs=(e,t)=>Object.keys(e).every(n=>e[n]===t[n]);var Ns=U('<tr><td class="check-wrapper svelte-zratx7"><div class="check svelte-zratx7"><input type="checkbox" name="checkbox"></div></td><td class="cell svelte-zratx7"><!></td><td class="cell svelte-zratx7"><!></td><td class="cell svelte-zratx7"><!></td></tr>');const As={hash:"svelte-zratx7",code:`tr.row.selected.svelte-zratx7,
  tr.row.selected.svelte-zratx7:hover {background:var(--table-selection);}tr.row.checked.svelte-zratx7,
  tr.row.checked.svelte-zratx7:hover {background:var(--background-secondary);}.check-wrapper.svelte-zratx7 {padding:0;position:relative;}.check.svelte-zratx7 {width:100%;height:100%;position:absolute;display:flex;align-items:center;justify-content:center;}.cell.svelte-zratx7 {position:relative;}`};function Is(e,t){ae(t,!0),ue(e,As);const[n,r]=ft(),s=()=>qe(o,"$tableState",n),o=ye(Hn),{selectRow:l,newCategory:a,newRow:i,deleteSelectedRow:u,updateRow:d,toggleEditing:f}=ye(dt);let c=z(Y(t.row.checked)),v=z(Y(t.row.name)),h=z(Y(t.row.amount)),b=z(Y(t.row.comment));Ce(()=>{const y={id:t.row.id,checked:_(c),name:_(v),amount:_(h),comment:_(b)};Rs(t.row,y)||d(y)});const w=new X.Menu().addItem(y=>{y.setTitle("New row"),y.setIcon("between-horizontal-end"),y.onClick(()=>i())}).addItem(y=>{y.setTitle("New category"),y.setIcon("table-rows-split"),y.onClick(()=>a())}).addSeparator().addItem(y=>{y.setTitle("Delete selected row"),y.setIcon("list-x"),y.onClick(u)}),E=y=>{y.preventDefault(),l(t.row.id),w.showAtMouseEvent(y)},x=()=>{l(null)};var I=Ns();let m;I.__click=x,I.__contextmenu=E;var C=p(I),J=p(C),F=p(J),M=N(C),Q=p(M);Ve(Q,{get value(){return t.row.name},onChange:y=>O(v,String(y),!0),onEditingChange:f});var T=N(M),g=p(T);Ve(g,{get value(){return t.row.amount},onChange:y=>O(h,Number(y),!0),onEditingChange:f});var S=N(T),L=p(S);Ve(L,{get value(){return t.row.comment},onChange:y=>O(b,String(y),!0),onEditingChange:f}),ne(y=>{m=Ke(I,1,"row svelte-zratx7",null,m,y),Ie(F,"id",`checkbox-${t.row.id}`)},[()=>({selected:s().selectedRowId===t.row.id,checked:t.row.checked})]),Qr(F,()=>_(c),y=>O(c,y)),q(e,I);var $=ie({handleOnMenu:E,handleOnRowClick:x});return r(),$}He(["click","contextmenu"]);var Os=U('<span class="label svelte-183s6ll">UNCHECKED:</span> <div> </div>',1),Ms=U('<span class="label svelte-183s6ll">UNCHECKED:</span> <div> </div>',1),Ds=U('<tr class="meta"><td></td><td class="cell svelte-183s6ll"><div class="wrapper svelte-183s6ll"><span class="label svelte-183s6ll">COUNT:</span> <div> </div> <!></div></td><td class="cell svelte-183s6ll"><div class="wrapper svelte-183s6ll"><span class="label svelte-183s6ll">SUM:</span> <div> </div> <!></div></td><td></td></tr>');const zs={hash:"svelte-183s6ll",code:".cell.svelte-183s6ll {font-size:var(--font-smallest);> .wrapper:where(.svelte-183s6ll) {display:grid;grid-template-columns:auto max-content;text-align:end;align-items:center;justify-items:end;gap:0 0.5rem;}.label:where(.svelte-183s6ll) {font-size:calc(var(--font-smallest) - 5%);}}"};function qs(e,t){ae(t,!0),ue(e,zs);const[n,r]=ft(),s=()=>qe(o,"$store",n),o=ye(Lt),l=D(()=>s().rows.get(t.categoryId)||[]),a=D(()=>_(l).filter(g=>!g.checked)),i=D(()=>_(l).length),u=D(()=>_(l).reduce((g,S)=>g+S.amount,0)),d=D(()=>_(a).length),f=D(()=>_(a).reduce((g,S)=>g+S.amount,0)),c=D(()=>_(d)>0&&_(d)!==_(i)),v=D(()=>_(f)>0&&_(f)!==_(u));var h=Ds(),b=N(p(h)),w=p(b),E=N(p(w),2),x=p(E),I=N(E,2);{var m=g=>{var S=Os(),L=N(Ee(S),2),$=p(L);ne(()=>te($,_(d))),q(g,S)};xe(I,g=>{_(c)&&g(m)})}var C=N(b),J=p(C),F=N(p(J),2),M=p(F),Q=N(F,2);{var T=g=>{var S=Ms(),L=N(Ee(S),2),$=p(L);ne(y=>te($,y),[()=>Fe.format(_(f))]),q(g,S)};xe(Q,g=>{_(v)&&g(T)})}ne(g=>{te(x,_(i)),te(M,g)},[()=>Fe.format(_(u))]),q(e,h),ie(),r()}var Fs=U('<span class="label svelte-4etdi9">UNCHECKED:</span> <div> </div>',1),Ls=U('<span class="label svelte-4etdi9">UNCHECKED:</span> <div> </div>',1),Ps=U('<tfoot><tr class="summary svelte-4etdi9"><th colspan="2" class="svelte-4etdi9"><div class="wrapper svelte-4etdi9"><span class="label svelte-4etdi9">COUNT:</span> <div> </div> <!></div></th><th class="svelte-4etdi9"><div class="wrapper svelte-4etdi9"><span class="label svelte-4etdi9">SUM:</span> <div> </div> <!></div></th><th class="svelte-4etdi9"></th></tr></tfoot>');const Bs={hash:"svelte-4etdi9",code:".summary.svelte-4etdi9 > th:where(.svelte-4etdi9) {font-size:var(--font-smallest);}.wrapper.svelte-4etdi9 {display:grid;grid-template-columns:auto max-content;text-align:end;align-items:baseline;justify-items:end;gap:0 0.5rem;}.label.svelte-4etdi9 {font-size:calc(var(--font-smallest) - 5%);font-weight:var(--font-normal);}"};function Us(e,t){ae(t,!0),ue(e,Bs);const[n,r]=ft(),s=()=>qe(o,"$store",n),o=ye(Lt),l=D(()=>Array.from(s().rows.values()).reduce((T,g)=>T+g.length,0)),a=D(()=>Array.from(s().rows.values()).reduce((T,g)=>T+g.reduce((S,L)=>S+L.amount,0),0)),i=D(()=>Array.from(s().rows.values()).reduce((T,g)=>T+g.filter(S=>!S.checked).length,0)),u=D(()=>Array.from(s().rows.values()).reduce((T,g)=>T+g.filter(S=>!S.checked).reduce((S,L)=>S+L.amount,0),0)),d=D(()=>_(i)>0&&_(i)!==_(l)),f=D(()=>_(u)>0&&_(u)!==_(a));var c=Ps(),v=p(c),h=p(v),b=p(h),w=N(p(b),2),E=p(w),x=N(w,2);{var I=T=>{var g=Fs(),S=N(Ee(g),2),L=p(S);ne(()=>te(L,_(i))),q(T,g)};xe(x,T=>{_(d)&&T(I)})}var m=N(h),C=p(m),J=N(p(C),2),F=p(J),M=N(J,2);{var Q=T=>{var g=Ls(),S=N(Ee(g),2),L=p(S);ne($=>te(L,$),[()=>Fe.format(_(u))]),q(T,g)};xe(M,T=>{_(f)&&T(Q)})}ne(T=>{te(E,_(l)),te(F,T)},[()=>Fe.format(_(a))]),q(e,c),ie(),r()}var Hs=U('<div class="icon svelte-1hq1sxh"></div>');const js={hash:"svelte-1hq1sxh",code:".icon.svelte-1hq1sxh {height:var(--icon-size);width:var(--icon-size);}"};function Ws(e,t){ae(t,!0),ue(e,js);let n;es(()=>{const s=X.getIcon(t.name);n&&s&&n.appendChild(s)});var r=Hs();Pn(r,s=>n=s,()=>n),q(e,r),ie()}var Ks=U('<tr class="add-row svelte-db1htd"><td colspan="4"><div class="button svelte-db1htd"><!> <span class="svelte-db1htd"> </span></div></td></tr>');const Vs={hash:"svelte-db1htd",code:".add-row.svelte-db1htd {cursor:pointer;}.add-row.svelte-db1htd:hover {background-color:var(--table-header-background-hover);}.button.svelte-db1htd {display:flex;align-items:center;gap:var(--size-2-2);color:var(--text-faint);margin:var(--size-2-2) 0 var(--size-2-2) 0.55rem;}.button.svelte-db1htd > span:where(.svelte-db1htd) {font-size:var(--font-smaller);line-height:normal;}"};function sn(e,t){ue(e,Vs);var n=Ks(),r=p(n);r.__click=function(...i){var u;(u=t.onClick)==null||u.apply(this,i)};var s=p(r),o=p(s);Ws(o,{name:"circle-plus"});var l=N(o,2),a=p(l);ne(()=>te(a,t.text)),q(e,n)}He(["click"]);var Ys=U("<!> <!> <!> <!>",1),Xs=U('<table class="table svelte-g6j82z"><!><tbody></tbody><!><!></table>');const Gs={hash:"svelte-g6j82z",code:".table.svelte-g6j82z {width:100%;margin:0;border-collapse:collapse;}"};function Zs(e,t){ae(t,!0),ue(e,Gs);const[n,r]=ft(),s=()=>qe(t.tableStateStore,"$tableStateStore",n),o=()=>qe(t.tableStore,"$tableStore",n);vt(Lt,t.tableStore),vt(Hn,t.tableStateStore);const l=ds(t.tableStore,t.tableStateStore);vt(dt,l);const{newCategory:a,newRow:i}=l;let u=!0;const d=X.debounce(w=>{if(u){u=!1;return}s().isEditing||t.onSave(w)},2e3,!0);t.tableStore.subscribe(d);var f=Xs(),c=p(f);ms(c,{});var v=N(c);Zt(v,5,()=>o().categories.entries(),([w,E])=>w,(w,E)=>{let x=()=>_(E)[0],I=()=>_(E)[1];var m=Ys(),C=Ee(m);const J=D(()=>o().categories.size>1);Ts(C,{get categoryId(){return x()},get categoryName(){return I()},get isDeletingEnabled(){return _(J)}});var F=N(C,2);Zt(F,1,()=>o().rows.get(x())||[],g=>g.id,(g,S)=>{Is(g,{get row(){return _(S)}})});var M=N(F,2);sn(M,{text:"New Row",onClick:()=>i(x())});var Q=N(M,2);{var T=g=>{qs(g,{get categoryId(){return x()}})};xe(Q,g=>{o().categories.size>1&&g(T)})}q(w,m)});var h=N(v);sn(h,{text:"New Category",onClick:a});var b=N(h);Us(b,{}),q(e,f),ie(),r()}class Js extends X.MarkdownRenderChild{constructor(t,n,r,s){super(n),this.el=n,this.app=r,this.context=s;const o=t||"",l=new us(o),{categories:a,rows:i}=l.parse();this.categories=a,this.rows=i}createTableStore(){const t=nn({rows:this.rows,categories:this.categories}),n=nn({selectedRowId:null,isEditing:!1});return[t,n]}async saveTable(t){const n=this.context.getSectionInfo(this.el);if(!n)return;const r=document.querySelector(".cm-scroller"),s=r?{top:r.scrollTop,left:r.scrollLeft}:{top:0,left:0};try{os("The table data is being saved"),await new cs().write(t,n,this.app),r&&(r.scrollTop=s.top,r.scrollLeft=s.left)}catch(o){Un("Error saving table.",o)}}onload(){const[t,n]=this.createTableStore();this.component=Pr(Zs,{target:this.el,props:{tableStore:t,tableStateStore:n,onSave:this.saveTable.bind(this)}})}async onunload(){await Ur(this.component),super.unload()}}const Qs=e=>{e.registerMarkdownCodeBlockProcessor("budget",(t,n,r)=>{r.addChild(new Js(t,n,e.app,r))})},$s=e=>{e.addCommand({id:"insert-budget-planner",name:"Insert Budget Planner",editorCallback:t=>{t.replaceSelection("```budget\n"+e.settings.defaultBudgetBlock+"\n```")}})};class eo extends X.Plugin{async loadSettings(){this.settings=Object.assign({},jn,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async onload(){await this.loadSettings(),$s(this),Qs(this),this.addSettingTab(new Wn(this.app,this))}}module.exports=eo;
